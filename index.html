<html>
  <head>
  </head>
  <body>
    <h1>Acme Customers</h1>
    <form id='customerForm'>
      <input name='name'>Name</input>
      <input name='email'>Email</input>
      <input type='checkbox' name='isVIP'>Is VIP?</input>
      <button id='createCustomer'>Create</button>

    </form>
    <ul id='customerList'>
    </ul>
    <script>
      const customerList = document.querySelector('#customerList');
      const customerForm = document.querySelector('#customerForm');
      const createCustomer = document.querySelector('#createCustomer');
      const nameInput = document.querySelector('[name="name"]');
      const emailInput = document.querySelector('[name="email"]');
      let customers = [
            { id: 1, name: 'moe', email: 'moe@gmail.com', isVIP: true},
            { id: 2, name: 'larry', isVIP: true, email: 'larry@gmail.com'},
            { id: 4, name: 'shep', email: 'shep@gmail.com'},
           ];

      customerList.addEventListener('click', (ev)=>{
        if(ev.target.tagName === 'BUTTON'){
        const idx = ([...ev.target.parentNode.parentNode.children].indexOf(ev.target.parentNode));
        customers = customers.filter((customer, _idx)=>{
          return _idx !== idx
        });
        render();
      }
      });

      nameInput.addEventListener('keyup', (ev)=>{

      });

      emailInput.addEventListener('keyup', (ev)=>{

      });

      customerForm.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        customers.push({
          name: nameInput.value,
          email: emailInput.value,
        });
        render();
      });

      const render = ()=>{
        const html = customers.map((customer,idx) =>{
          return `
            <li data-id='${idx}'>
              ${customer.name} (${customer.email})
              <button>Destroy</button>
              </li>
          `
        }).join('');
        customerList.innerHTML = html;
      }



    render();
    </script>
  </body>
</html>
